<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Register — Sanitation Report</title>
  <style>
    :root{
      --blue:#0d6efd;
      --navy:#0749a7;
      --muted:#6c757d;
      --card:#ffffff;
      --radius:12px;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }

    html,body{
      height:100%;
      margin:0;
      background: var(--blue); /* solid blue background */
      color:#ffffff;
    }

    .centered{
      min-height:100%;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:28px;
    }

    .card{
      width:100%;
      max-width:560px;
      background:var(--card);
      border-radius:var(--radius);
      box-shadow: 0 8px 30px rgba(7,40,84,0.08);
      padding:28px;
      box-sizing:border-box;
      border:1px solid rgba(13,110,253,0.08);
      color:#0b2640;
    }

    header h1{
      margin:0 0 6px 0;
      font-size:20px;
      color:var(--navy);
    }

    header p{
      margin:0 0 18px 0;
      color:var(--muted);
      font-size:14px;
    }

    form .field{
      display:flex;
      flex-direction:column;
      gap:8px;
      margin-bottom:12px;
    }

    label{
      font-size:13px;
      color:#16324a;
    }

    input[type="text"],
    input[type="email"],
    input[type="password"],
    textarea{
      padding:10px 12px;
      border-radius:8px;
      border:1px solid rgba(7,40,84,0.08);
      font-size:15px;
      outline: none;
      background: #fbfdff;
    }

    textarea{ min-height:80px; resize:vertical; }

    input:focus, textarea:focus{
      border-color:var(--blue);
      box-shadow: 0 0 0 4px rgba(13,110,253,0.06);
    }

    .row { display:flex; gap:12px; align-items:center; }
    .small{ font-size:13px; color:var(--muted); }

    .btn{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:10px 14px;
      border-radius:10px;
      border: none;
      cursor:pointer;
      font-weight:600;
      font-size:15px;
    }
    .btn-primary{
      background: linear-gradient(180deg,var(--blue),var(--navy));
      color:white;
      box-shadow: 0 6px 18px rgba(13,110,253,0.12);
    }
    .btn-ghost{
      background:transparent;
      border:1px solid rgba(7,40,84,0.08);
      color:var(--navy);
    }
    .google-btn{
      width:100%;
      display:inline-flex;
      justify-content:center;
      padding:10px 12px;
      gap:10px;
      border-radius:10px;
      border:1px solid rgba(7,40,84,0.08);
      cursor:pointer;
      background:#fff;
      font-weight:600;
      color:#0b2640;
      margin-bottom:12px;
    }

    .helper{ font-size:13px; color:var(--muted); margin-top:8px; }
    .error{ color:#b00020; font-size:13px; }
    .logout{ background:transparent; border:1px solid rgba(7,40,84,0.08); padding:8px 12px; border-radius:8px; cursor:pointer; }

    @media (max-width:600px){
      .card{ padding:18px; }
      .row { flex-direction:column; align-items:stretch; }
    }
  </style>
</head>
<body>
  <div class="centered">
    <main class="card" role="main" aria-labelledby="title">
      <header>
        <h1 id="title">Citizen Sanitation — Register</h1>
        <p>Create your account to report & track sanitation issues.</p>
      </header>

      <button id="googleBtn" class="google-btn" aria-label="Register with Google">
        <!-- Google icon -->
        <svg width="18" height="18" viewBox="0 0 533.5 544.3" aria-hidden="true" focusable="false">
          <path fill="#4285F4" d="M533.5 278.4c0-18.5-1.5-36.3-4.3-53.6H272v101.6h146.9c-6.3 33.4-25.9 61.6-55.3 80.4v66.8h89.2c52.3-48.2 84.7-119.2 84.7-195.2z"/>
          <path fill="#34A853" d="M272 544.3c73.6 0 135.4-24.4 180.5-66.1l-89.2-66.8c-24.8 16.7-56.8 26.5-91.3 26.5-70.3 0-129.9-47.4-151.3-111.3H30.5v69.9C75.4 493.3 168.9 544.3 272 544.3z"/>
          <path fill="#FBBC05" d="M120.7 322.5c-6.6-19.6-10.4-40.6-10.4-62 0-21.4 3.8-42.4 10.4-62.1v-69.9H30.5C10.9 164.1 0 212.6 0 262.5s10.9 98.4 30.5 129.9l90.2-69.9z"/>
          <path fill="#EA4335" d="M272 107.1c39.9 0 75.8 13.7 104.1 40.7l78-78C411.3 22.8 345.6 0 272 0 168.9 0 75.4 51 30.5 128.5l90.2 69.9C142.1 154.6 201.7 107.1 272 107.1z"/>
        </svg>
        Register with Google
      </button>

      <form id="regForm" novalidate>
        <div class="field">
          <label for="fullname">Full name</label>
          <input id="fullname" name="fullname" type="text" placeholder="Your full name" required />
          <div id="fErr" class="error"></div>
        </div>

        <div class="row">
          <div style="flex:1;">
            <div class="field">
              <label for="contact">Contact no.</label>
              <input id="contact" name="contact" type="text" placeholder="e.g. 9876543210" required />
              <div id="cErr" class="error"></div>
            </div>
          </div>

          <div style="flex:1;">
            <div class="field">
              <label for="email">Email address</label>
              <input id="email" name="email" type="email" placeholder="you@example.com" required />
              <div id="eErr" class="error"></div>
            </div>
          </div>
        </div>

        <div class="row">
          <div style="flex:1;">
            <div class="field">
              <label for="password">Password</label>
              <div style="display:flex; gap:8px; align-items:center;">
                <input id="password" name="password" type="text" placeholder="Click Generate to create a password" readonly style="flex:1;" />
                <button type="button" id="genBtn" class="btn btn-ghost" title="Generate password">Generate</button>
              </div>
              <div id="pErr" class="error"></div>
            </div>
          </div>
          <div style="width:130px; display:flex; align-items:flex-end;">
            <button id="copyBtn" type="button" class="btn" style="padding:10px 8px;border-radius:8px;border:1px solid rgba(7,40,84,0.08);">Copy</button>
          </div>
        </div>

        <div class="field">
          <label for="address">Address</label>
          <textarea id="address" name="address" placeholder="Your address / locality" required></textarea>
          <div id="aErr" class="error"></div>
        </div>

        <div class="row" style="justify-content:space-between; align-items:center; margin-bottom:8px;">
          <label class="small"><input type="checkbox" id="terms" /> I agree to Terms & Privacy</label>
        </div>

        <div class="field">
          <button id="submitBtn" class="btn btn-primary" type="submit">Create account</button>
        </div>

        <div class="helper">Already have an account? <a href="login.html" onclick="">Sign in</a></div>
      </form>
    </main>
  </div>

  <script>
    (function(){
      const form = document.getElementById('regForm');
      const full = document.getElementById('fullname');
      const contact = document.getElementById('contact');
      const email = document.getElementById('email');
      const password = document.getElementById('password');
      const address = document.getElementById('address');
      const genBtn = document.getElementById('genBtn');
      const copyBtn = document.getElementById('copyBtn');
      const googleBtn = document.getElementById('googleBtn');

      const fErr = document.getElementById('fErr');
      const cErr = document.getElementById('cErr');
      const eErr = document.getElementById('eErr');
      const pErr = document.getElementById('pErr');
      const aErr = document.getElementById('aErr');

      function clearErrors(){
        fErr.textContent = ''; cErr.textContent = ''; eErr.textContent = ''; pErr.textContent = ''; aErr.textContent = '';
      }

      function validEmail(v){
        return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(v);
      }
      function validContact(v){
        // simple 10-digit check; adapt as needed
        return /^\d{10}$/.test(v);
      }

      function generatePassword(len=12){
        const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%&*()-_=+";
        let out = "";
        for(let i=0;i<len;i++){
          out += chars.charAt(Math.floor(Math.random()*chars.length));
        }
        return out;
      }

      genBtn.addEventListener('click', function(){
        const pwd = generatePassword(12);
        password.value = pwd;
      });

      copyBtn.addEventListener('click', function(){
        if(!password.value){ alert('No password to copy. Click Generate first.'); return; }
        navigator.clipboard?.writeText(password.value).then(()=> {
          alert('Password copied to clipboard');
        }, ()=> {
          alert('Copy failed — your browser may block clipboard access.');
        });
      });

      form.addEventListener('submit', function(ev){
        ev.preventDefault();
        clearErrors();
        let ok = true;
        const fullname = full.value.trim();
        const contactVal = contact.value.trim();
        const emailVal = email.value.trim();
        const pwd = password.value;
        const addr = address.value.trim();

        if(fullname.length < 2){ fErr.textContent = 'Please enter your full name.'; ok = false; }
        if(!validContact(contactVal)){ cErr.textContent = 'Enter a valid 10-digit contact number.'; ok = false; }
        if(!validEmail(emailVal)){ eErr.textContent = 'Please enter a valid email address.'; ok = false; }
        if(pwd.length < 8){ pErr.textContent = 'Please generate a password (min 8 chars).'; ok = false; }
        if(addr.length < 5){ aErr.textContent = 'Please enter your address or locality.'; ok = false; }

        if(!ok) return;

        const user = {
          fullname: fullname,
          contact: contactVal,
          email: emailVal,
          password: pwd,
          address: addr,
          registeredAt: new Date().toISOString()
        };

        try {
          sessionStorage.setItem('sanitation_user', JSON.stringify(user));
        } catch(e){
          // ignore storage errors
        }

        // ----------------- IMPORTANT -----------------
        // REDIRECT TO NEXT PAGE AFTER SUCCESSFUL REGISTRATION:
        // Change the URL below to the page you want users to go to.
        // Example: window.location.href = 'dashboard.html';
        //        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^  <-- CHANGE THIS LINE
        window.location.href = 'problem.html';
        // ----------------- IMPORTANT -----------------
      });

      // Mock Google register: simulates successful Google-based registration
      googleBtn.addEventListener('click', function(){
        const googleUser = {
          fullname: 'Google User',
          contact: '',
          email: 'googleuser@example.com',
          password: '',
          address: '',
          provider: 'google',
          registeredAt: new Date().toISOString()
        };
        try { sessionStorage.setItem('sanitation_user', JSON.stringify(googleUser)); } catch(e){}
        // Same redirect line for Google signup — change as required
        window.location.href = 'problem.html'; // <-- CHANGE THIS LINE if needed
      });

    })();
  </script>
</body>
</html>
